{% block content %}
<!-- 
  election.theyworkforyou.com by mySociety:
  {{ debug_message }} 
  {{ error_message }} 
-->
{% if candidacy %}
<!-- 
    Canonical:  {{ name_canonical }} 
    Candidate:  {{ candidacy.candidate.name}}
    Party:      {{ candidacy.candidate.party.name }}
    Seat:       {{ candidacy.seat.name }}
    Has survey: {{ candidacy.survey_filled_in }}
-->
    {% if candidacy.survey_filled_in and candidacy.surveyresponse_set %}
        <style>
            .ms-twfy-container{
                margin: 0;
            }
            .ms-twfy-container h2{
                font-size: 15px;
                margin: 0px;
            }
            .ms-twfy-subhead{
                font-size: 15px;
                color: rgb(153, 153, 153);
                margin: 0px;
            }
            .ms-twfy-container p{
                margin: 8px 0;
            }
            .ms-twfy-item {
                margin-top: 16px;
                border-top: 1px solid rgb(153, 153, 153);
                clear: both;
            }
            .ms-twfy-q {
                font-size: 14px;
            }
            .ms-twfy-a{
                float: left;
                width: 88px;
                padding: 2px;
                margin: 6px 0;
            }
            .ms-twfy-no{
                color: rgb(153, 153, 153);
                background-color: rgb(245, 245, 245);
            }
            .ms-twfy-yes{
                color: rgb(255, 255, 255);
                background-color: rgb(110, 29, 16);
            }
        </style>
        <div class="ms-twfy-container" style="width:460px;">
            <div class="hd">
                <h2>
                    TheyWorkForYou questionnaire
                </h2>
            </div>
            <div class="ms-twfy-subhead">
                Candidates give their response to a series of policy positions
            </div>
            <p>
                <a href="#">Candidate's full explanation</a>
            </p>
            {% for sr in candidacy.surveyresponse_set %}
                <div class="ms-twfy-item">
                    <div class="ms-twfy-q">
                        {{ forloop.counter }}.
                        {% if not sr.national %}
                                Local:
                        {% endif %}
                        {% if sr.refined_issue.short_name %}
                                <!--{{sr.refined_issue.short_name}}:-->
                        {% endif %}
                        "{{sr.refined_issue.question}}"
                    </div>
                    {% for value, label in result_labels %}
                        <div class="ms-twfy-a ms-twfy-{% ifequal value sr.agreement %}yes{%else%}no{%endifequal%}">
                            {{ label|safe }}
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endif %}
{% endblock %}
